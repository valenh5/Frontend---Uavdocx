import{$ as U,A as l,Aa as L,Ba as N,D as E,E as d,F as x,G as k,P as I,Q as T,T as D,W as j,X as V,Z as z,c as P,ea as A,f as p,g as m,j as b,ja as F,k as w,l as c,m as f,ma as G,n as y,o as g,q as s,r as O,s as v,t as n,u as o,v as C,w as M,x as S,y as _,z as u,za as R}from"./chunk-UWVZVP6S.js";var $={production:!0,apiUrl:"URL_UAVDOCXXXX"};function B(t,r){t&1&&(n(0,"div"),d(1,"Cargando producto..."),o())}function K(t,r){if(t&1&&C(0,"img",24),t&2){let e=l(2);s("src",e.imagenSeleccionada,b)}}function q(t,r){if(t&1){let e=_();n(0,"img",25),u("click",function(){p(e);let i=l(2);return m(i.seleccionarImagen(i.producto.imagenPrincipal))}),o()}if(t&2){let e=l(2);v("miniatura-seleccionada",e.imagenSeleccionada===e.producto.imagenPrincipal),s("src",e.producto.imagenPrincipal,b)}}function H(t,r){if(t&1){let e=_();n(0,"img",26),u("click",function(){let i=p(e).$implicit,h=l(2);return m(h.seleccionarImagen(i))}),o()}if(t&2){let e=r.$implicit,a=l(2);v("miniatura-seleccionada",a.imagenSeleccionada===e),s("src",e,b)}}function J(t,r){if(t&1){let e=_();n(0,"button",27),u("click",function(){let i=p(e).$implicit,h=l(2);return m(i.value>0&&(h.talleSeleccionado=i.key))}),n(1,"span"),d(2),o(),n(3,"span",28),d(4),o()()}if(t&2){let e=r.$implicit,a=l(2);v("talle-seleccionado",a.talleSeleccionado===e.key)("talle-sin-stock",e.value===0),s("disabled",e.value===0),c(),O("text-decoration",e.value===0?"line-through":"none"),c(),x(e.key),c(2),k("(",e.value," disponibles)")}}function Q(t,r){if(t&1){let e=_();n(0,"div",29),u("click",function(){p(e);let i=l(2);return m(i.cerrarGuiaTalles())}),n(1,"div",30),u("click",function(i){return p(e),m(i.stopPropagation())}),C(2,"img",31),n(3,"button",32),u("click",function(){p(e);let i=l(2);return m(i.cerrarGuiaTalles())}),d(4,"Cerrar"),o()()()}}function W(t,r){if(t&1&&(n(0,"div",33),d(1),o()),t&2){let e=l(2);c(),x(e.mensajeError)}}function Y(t,r){if(t&1&&(n(0,"div",34),d(1),o()),t&2){let e=l(2);c(),x(e.mensajeExito)}}function Z(t,r){if(t&1){let e=_();M(0),n(1,"div"),g(2,K,1,1,"img",5),n(3,"div",6),g(4,q,1,3,"img",7)(5,H,1,3,"img",8),o()(),n(6,"div")(7,"h1",9),d(8),o(),n(9,"p"),d(10),o(),n(11,"div")(12,"strong"),d(13,"Talle"),o(),n(14,"div",10),g(15,J,5,9,"button",11),I(16,"keyvalue"),o()(),n(17,"div",12),u("click",function(){p(e);let i=l();return m(i.abrirGuiaTalles())}),n(18,"span",13),d(19,"straighten"),o(),n(20,"span",14),d(21,"Gu\xEDa de talles"),o()(),g(22,Q,5,0,"div",15),n(23,"div",16)(24,"div",17)(25,"button",18),u("click",function(){p(e);let i=l();return m(i.bajarCantidad())}),d(26,"-"),o(),n(27,"div",19),d(28),o(),n(29,"button",18),u("click",function(){p(e);let i=l();return m(i.subirCantidad())}),d(30,"+"),o()(),n(31,"button",20),u("click",function(){p(e);let i=l();return m(i.agregarAlCarrito())}),d(32,"Agregar al carrito"),o(),n(33,"button",21),u("click",function(){p(e);let i=l();return m(i.volver())}),d(34,"Volver"),o()(),g(35,W,2,1,"div",22)(36,Y,2,1,"div",23),o(),S()}if(t&2){let e=l();c(2),s("ngIf",e.imagenSeleccionada),c(2),s("ngIf",e.producto.imagenPrincipal),c(),s("ngForOf",e.producto.imagenesSecundarias),c(3),x(e.producto.nombre),c(2),k(" $",e.producto.precio,""),c(5),s("ngForOf",T(16,10,e.producto.talles)),c(7),s("ngIf",e.mostrarGuiaTalles),c(6),x(e.cantidad),c(7),s("ngIf",e.mensajeError),c(),s("ngIf",e.mensajeExito)}}function ee(t,r){t&1&&(n(0,"div",35),d(1,"No se encontr\xF3 el producto."),o())}var X=class t{constructor(r,e,a,i){this.carritoService=r;this.route=e;this.prendasService=a;this.usuarioService=i}mostrarGuiaTalles=!1;talleSeleccionado="";usuarioLogueado=null;esAdminUsuario=!1;esAdmin(){return this.esAdminUsuario=this.usuarioService.esAdminDesdeToken(),this.esAdminUsuario}obtenerUsuarioLogueado(){this.usuarioLogueado=localStorage.getItem("usuario")}producto=null;cargando=!0;mensajeExito="";mensajeError="";cantidad=1;apiUrl=$.apiUrl+"/prendas";prendas=[];paginaActual=1;limitePorPagina=3;totalPaginas=1;prendasFiltradas=[];imagenSeleccionada=null;ngOnInit(){return P(this,null,function*(){let r=Number(this.route.snapshot.paramMap.get("id"));if(r)try{this.producto=yield this.prendasService.cargarPrenda(r),this.producto&&(this.imagenSeleccionada=this.producto.imagenPrincipal||null)}catch{this.producto=null}this.cargando=!1,this.obtenerUsuarioLogueado(),this.esAdmin()})}seleccionarImagen(r){this.imagenSeleccionada=r}volver(){history.back()}bajarCantidad(){this.cantidad>1&&this.cantidad--}subirCantidad(){this.cantidad++}agregarAlCarrito(){return P(this,null,function*(){if(this.mensajeExito="",this.mensajeError="",this.producto)try{if(!(yield this.prendasService.verificarTalle(this.producto.id,this.talleSeleccionado,this.cantidad))){this.mensajeError="No hay suficiente cantidad de ese talle",setTimeout(()=>{this.mensajeError=""},2e3);return}yield this.carritoService.agregarAlCarrito(this.producto.id,this.cantidad,this.talleSeleccionado),this.mensajeExito="Producto agregado al carrito correctamente",setTimeout(()=>{this.mensajeExito=""},2e3)}catch{this.mensajeError="Error al agregar el producto al carrito",setTimeout(()=>{this.mensajeError=""},2e3)}})}abrirGuiaTalles(){this.mostrarGuiaTalles=!0}cerrarGuiaTalles(){this.mostrarGuiaTalles=!1}static \u0275fac=function(e){return new(e||t)(f(L),f(A),f(N),f(G))};static \u0275cmp=y({type:t,selectors:[["app-producto-detalle"]],decls:7,vars:3,consts:[["noProducto",""],["rel","stylesheet","href",w`https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined`],[1,"producto-detalle-container"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["alt","Imagen de la prenda","class","producto-imagen","style","margin-bottom: 12px;",3,"src",4,"ngIf"],[1,"miniaturas-container",2,"display","flex","gap","8px","justify-content","center","margin-top","10px"],["alt","Principal","class","miniatura","style","width: 60px; height: 60px; object-fit: cover; border-radius: 6px; border: 2px solid #ccc; cursor: pointer;",3,"src","miniatura-seleccionada","click",4,"ngIf"],["alt","Secundaria","class","miniatura","style","width: 60px; height: 60px; object-fit: cover; border-radius: 6px; border: 2px solid #ccc; cursor: pointer;",3,"src","miniatura-seleccionada","click",4,"ngFor","ngForOf"],["id","nombre"],[1,"talles-fila"],["type","button","class","talle-cuadro",3,"talle-seleccionado","talle-sin-stock","disabled","click",4,"ngFor","ngForOf"],["tabindex","0","role","button","aria-label","Gu\xEDa de talles",1,"guia-talles-container",3,"click"],[1,"material-symbols-outlined"],[1,"guia-talles-text"],["class","popup-overlay",3,"click",4,"ngIf"],[2,"display","flex","align-items","center","gap","12px","margin-top","18px"],[1,"cantidad-selector"],["type","button",1,"cantidad-btn",3,"click"],[1,"cantidad-valor"],[1,"agregar-carrito",3,"click"],[1,"volver",3,"click"],["class","error",4,"ngIf"],["class","exito",4,"ngIf"],["alt","Imagen de la prenda",1,"producto-imagen",2,"margin-bottom","12px",3,"src"],["alt","Principal",1,"miniatura",2,"width","60px","height","60px","object-fit","cover","border-radius","6px","border","2px solid #ccc","cursor","pointer",3,"click","src"],["alt","Secundaria",1,"miniatura",2,"width","60px","height","60px","object-fit","cover","border-radius","6px","border","2px solid #ccc","cursor","pointer",3,"click","src"],["type","button",1,"talle-cuadro",3,"click","disabled"],[2,"font-size","0.9em","color","#888"],[1,"popup-overlay",3,"click"],[1,"popup-content",3,"click"],["src","https://acdn-us.mitiendanube.com/stores/001/596/994/products/campera-melo-fc909d79cf0e9e138017562155646530-1024-1024.jpg",2,"max-width","100%","max-height","80vh"],[1,"cerrar-popup",3,"click"],[1,"error"],[1,"exito"],[1,"no-producto"]],template:function(e,a){if(e&1&&(C(0,"link",1),n(1,"main")(2,"div",2),g(3,B,2,0,"div",3)(4,Z,37,12,"ng-container",4)(5,ee,2,0,"ng-template",null,0,D),o()()),e&2){let i=E(6);c(3),s("ngIf",a.cargando),c(),s("ngIf",!a.cargando&&a.producto)("ngIfElse",i)}},dependencies:[U,j,V,z,R,F],styles:['.producto-detalle-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:.8fr 1fr;gap:16px;margin-top:3%}.producto-imagen[_ngcontent-%COMP%]{width:80%;height:70%;object-fit:cover;border-radius:8px;box-shadow:0 2px 8px #0000001f;background:#f8f8f8;display:block;margin:0 auto}#nombre[_ngcontent-%COMP%]{font-size:24px;font-weight:700;margin-bottom:8px}.material-symbols-outlined[_ngcontent-%COMP%]{font-variation-settings:"FILL" 0,"wght" 400,"GRAD" 0,"opsz" 24}.guia-talles-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;cursor:pointer;margin:12px 0;-webkit-user-select:none;user-select:none;color:#000;font-weight:500;width:fit-content}.guia-talles-container[_ngcontent-%COMP%]:focus{outline:2px solid #000000}.guia-talles-text[_ngcontent-%COMP%]{font-size:16px}.popup-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000}.popup-content[_ngcontent-%COMP%]{background:#fff;padding:24px;border-radius:8px;box-shadow:0 2px 8px #0003;position:relative;max-width:90vw;max-height:90vh;display:flex;flex-direction:column;align-items:center}.cerrar-popup[_ngcontent-%COMP%]{margin-top:16px;padding:8px 16px;background:#fff;color:#000;border:1px solid #000000;border-radius:4px;cursor:pointer}.cerrar-popup[_ngcontent-%COMP%]:hover{background:#636363}.error[_ngcontent-%COMP%]{color:red;background-color:#fdd;padding:10px;border:1px solid red;border-radius:4px;margin-top:2%;max-width:70%}.exito[_ngcontent-%COMP%]{color:#155724;background-color:#d4edda;padding:10px;border:1px solid #28a745;border-radius:4px;margin-top:2%;max-width:70%}.talles-fila[_ngcontent-%COMP%]{display:flex;gap:10px;margin:10px 0}.talle-cuadro[_ngcontent-%COMP%]{padding:10px 18px;border:2px solid #ccc;border-radius:8px;background:#fff;cursor:pointer;font-weight:700;transition:border-color .2s,background .2s}.talle-cuadro[_ngcontent-%COMP%]:disabled, .talle-sin-stock[_ngcontent-%COMP%]{color:#888;background:#f5f5f5;border-color:#ccc;text-decoration:line-through;cursor:not-allowed;opacity:.7}.talle-seleccionado[_ngcontent-%COMP%]{border-color:#000;background:#e6f0ff;color:#000}.agregar-carrito[_ngcontent-%COMP%]{padding:1.2% 7%;background-color:#000;color:#fff;border:none;border-radius:4px;cursor:pointer;font-size:16px}.volver[_ngcontent-%COMP%]{padding:1.2% 3%;background-color:#000;color:#fff;border:none;border-radius:4px;cursor:pointer;font-size:16px}.agregar-carrito[_ngcontent-%COMP%]:hover, .volver[_ngcontent-%COMP%]:hover{background-color:#e2e2e2;color:#000;border:1px solid #000000}.cantidad-selector[_ngcontent-%COMP%]{display:flex;align-items:center;border:1px solid #ccc;border-radius:8px;background:#fff;padding:4px 8px}.cantidad-btn[_ngcontent-%COMP%]{background:#fff;border:none;border-radius:4px;width:32px;height:32px;font-size:20px;cursor:pointer;font-weight:700;transition:background .2s}.cantidad-btn[_ngcontent-%COMP%]:hover{background:#e0e0e0}.cantidad-valor[_ngcontent-%COMP%]{min-width:32px;text-align:center;font-size:18px;font-weight:700;margin:0 8px}.miniatura-seleccionada[_ngcontent-%COMP%]{border:2px solid #007bff!important;box-shadow:0 0 6px #007bff44}.miniaturas-vertical[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;margin-right:10px}.producto-detalle-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:.5fr 1fr;gap:32px;margin-top:3%;align-items:flex-start}.dropdown[_ngcontent-%COMP%]{position:relative;display:inline-block}.dropdown-btn[_ngcontent-%COMP%]{font-family:Montserrat,Urbanist,Arial,sans-serif;font-weight:600;color:#000;font-size:16px;background:none;border:none;cursor:pointer;padding:0;margin:0;transition:color .3s ease;text-decoration:none}.dropdown-btn[_ngcontent-%COMP%]:hover{color:#007bff}.dropdown-content[_ngcontent-%COMP%]{display:none;position:absolute;background-color:#fff;min-width:160px;box-shadow:0 8px 16px #0003;z-index:1;left:0;top:100%}.dropdown[_ngcontent-%COMP%]:hover   .dropdown-content[_ngcontent-%COMP%]{display:block}.dropdown-content[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-family:Montserrat,Urbanist,Arial,sans-serif;font-weight:600;color:#000;font-size:16px;text-decoration:none;display:block;padding:12px 16px;background:none;border:none;transition:color .3s ease,background .2s}.dropdown-content[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#007bff;background-color:#f1f1f1}.material-symbols-outlined[_ngcontent-%COMP%]{size:245px;vertical-align:middle;color:#000;margin-left:8px;cursor:pointer;text-decoration:none}.material-symbols-outlined[_ngcontent-%COMP%]:hover{color:#007bff}.navbar[_ngcontent-%COMP%]{background-color:#fff;box-shadow:0 2px 6px #0000001a;padding:15px 0;position:fixed;width:100vw;left:0;top:0;z-index:1000;margin:0}.navbar-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:0 24px;display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center}.navbar-logo[_ngcontent-%COMP%]{font-size:26px;font-weight:700;color:#000;text-decoration:none;transition:color .3s ease;display:block;margin:0 auto 4px;text-align:center}.navbar-menu[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-top:8px;gap:20px}.navbar-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .navbar-container[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{font-weight:600;color:#000;text-decoration:none;font-size:16px;transition:color .3s ease;margin-left:0;margin-right:0}.navbar-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#007bff}.navbar-container[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{margin-top:8px;text-align:center}']})};export{X as ProductoDetalleComponent};
