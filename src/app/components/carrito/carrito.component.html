<link rel="stylesheet" href="../navbar-global.css" />
<nav class="navbar">
  <div class="navbar-container" style="display: flex; flex-direction: row; align-items: center; justify-content: space-between;">
    <a href="/" class="navbar-logo" style="margin-left:0; text-align:left;">UAVDOCX</a>
    <div class="navbar-menu">
      <a href="/">Inicio</a>
      <a href="/productos">Productos</a>
      <a [routerLink]="usuarioLogueado ? '/usuario' : '/login'">Sesion</a>
      <div *ngIf="esAdminUsuario" class="dropdown">
        <a class="navbar-link dropdown-btn">Admin</a>
        <div class="dropdown-content">
          <a href="./usuarios">Usuarios</a>
          <a href="./reclamos">Reclamos</a>
          <a href="./abm">Prendas</a>
        </div>
      </div>
    </div>
    <div class="logos">
      <a href="/carrito" class="material-symbols-outlined">shopping_cart</a>
      <a href="/usuario" class="material-symbols-outlined">person</a>
      <a href="/reclamo" class="material-symbols-outlined">sentiment_extremely_dissatisfied</a>
      <a href="/local" class="material-symbols-outlined">store</a>
    </div>
  </div>
</nav>

<p class="camino">Inicio - Carrito de Compras</p>

<div *ngIf="mensajeError" class="error">{{ mensajeError }}</div>

<div class="carrito-header">
  <span>Producto</span>
  <span>Cantidad</span>
  <span>Precio</span>
  <span>Subtotal</span>
  <span>Eliminar</span>
  <span style="flex:0 0 60px"></span>
</div>
<ul>
  <li class="producto" *ngFor="let item of carrito" >
    <span >
      <img (click)="verProducto(item.id)" *ngIf="item.imagen" [src]="item.imagen" alt="Imagen de {{item.nombre}}" style="cursor:pointer;width:40px;height:40px;object-fit:cover;margin-right:8px;vertical-align:middle;">
      <span (click)="verProducto(item.id)" style="vertical-align:middle; cursor: pointer;">{{ item.nombre || item.id }}</span>
    </span>
    <div class="cantidad-container">
      <span class="cantidad-borde">
        <button class="cantidad" (click)="disminuirCantidad(item.id, item.talle)">-</button>
        <span>{{ item.cantidad }}</span>
        <button class="cantidad" (click)="aumentarCantidad(item.id, item.talle)">+</button>
      </span>
    </div>
    <span>${{ item.precio }}</span>
    <span>${{ item.cantidad * item.precio }}</span>

    <button (click)="eliminarDelCarrito(item.id, item.talle)" class="btn">
      <svg viewBox="0 0 15 17.5" height="17.5" width="15" xmlns="http://www.w3.org/2000/svg" class="icon">
      <path transform="translate(-2.5 -1.25)" d="M15,18.75H5A1.251,1.251,0,0,1,3.75,17.5V5H2.5V3.75h15V5H16.25V17.5A1.251,1.251,0,0,1,15,18.75ZM5,5V17.5H15V5Zm7.5,10H11.25V7.5H12.5V15ZM8.75,15H7.5V7.5H8.75V15ZM12.5,2.5h-5V1.25h5V2.5Z" id="Fill"></path>
    </svg>
    </button>
  </li>
</ul>

<div *ngIf="!carrito.length" class="carrito-vacio">
  <p>El carrito está vacío. <a href="/productos">Ver productos</a></p>
</div>

<button [disabled]="!carrito.length" class="compra" (click)="comprar()">Iniciar Compra</button>