<link rel="stylesheet" href="../navbar-global.css" />
<nav class="navbar">
  <div class="navbar-container" style="display: flex; flex-direction: row; align-items: center; justify-content: space-between;">
    <a href="/" class="navbar-logo" style="margin-left:0; text-align:left;">UAVDOCX</a>
    <div class="navbar-menu">
      <a href="/">Inicio</a>
      <a href="/productos">Productos</a>
      <a [routerLink]="usuarioLogueado ? '/usuario' : '/login'">Sesion</a>
      <div *ngIf="esAdminUsuario" class="dropdown">
        <a class="navbar-link dropdown-btn">Admin</a>
        <div class="dropdown-content">
          <a href="./usuarios">Usuarios</a>
          <a href="./reclamos">Reclamos</a>
          <a href="./abm">Prendas</a>
        </div>
      </div>
    </div>
    <div class="logos">
      <a href="/carrito" class="material-symbols-outlined">shopping_cart</a>
      <a href="/usuario" class="material-symbols-outlined">person</a>
      <a href="/reclamo" class="material-symbols-outlined">sentiment_extremely_dissatisfied</a>
      <a href="/local" class="material-symbols-outlined">store</a>
    </div>
  </div>
</nav>

<div *ngIf="!esAdmin">
  <h2 style="color: red;">NoNoNo solo los administradores pueden acceder a esta sección.</h2>
</div>

<div *ngIf="esAdmin">
  <h1>Usuarios</h1>
  <div class="usuarios-lista">
    <table>
      <thead>
        <tr>
          <th>ID</th>
          <th>Usuario</th>
          <th>Email</th>
          <th>Verificado</th>
          <th>Admin</th>
          <th>Creado</th>
          <th>Actualizado</th>
          <th>Opciones</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let usuario of usuarios">
          <td>{{ usuario.id }}</td>
          <td>{{ usuario.usuario }}</td>
          <td>{{ usuario.email }}</td>
          <td>{{ usuario.verificado ? 'Sí' : 'No' }}</td>
          <td>{{ usuario.admin ? 'Sí' : 'No' }}</td>
          <td>{{ usuario.createdAt }}</td>
          <td>{{ usuario.updatedAt }}</td>
          <td class="opciones">
            <button (click)="cambiarVerificado(usuario.id)">Cambiar Verificado</button>
            <button (click)="cambiarAdmin(usuario.id)">Cambiar Admin</button>
            <button (click)="mostrarConfirmacion(usuario.id)">Eliminar</button>
            <div *ngIf="mostrarTooltip && usuarioAEliminar === usuario.id" class="tooltip-overlay">
  <div class="tooltip-confirmacion">
    <span>¿Estás seguro?</span>
    <button (click)="confirmarEliminarUsuario()">Sí</button>
    <button (click)="cancelarEliminarUsuario()">No</button>
  </div>
</div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>