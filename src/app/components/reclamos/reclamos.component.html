<link rel="stylesheet" href="../navbar-global.css" />
<div *ngIf="!esAdminUsuario">
  <h2 style="color: red;">No, solo los administradores pueden acceder a esta secci贸n.</h2>
</div>
<div *ngIf="esAdminUsuario">
  <nav class="navbar">
    <div class="navbar-container" style="display: flex; flex-direction: row; align-items: center; justify-content: space-between;">
      <a href="/" class="navbar-logo" style="margin-left:0; text-align:left;">UAVDOCX</a>
      <div class="navbar-menu">
        <a href="/">Inicio</a>
        <a href="/productos">Productos</a>
        <a [routerLink]="usuarioLogueado ? '/usuario' : '/login'">Sesion</a>
        <div *ngIf="esAdminUsuario" class="dropdown">
          <a class="navbar-link dropdown-btn">Admin</a>
          <div class="dropdown-content">
            <a href="./usuarios">Usuarios</a>
            <a href="./reclamos">Reclamos</a>
            <a href="./abm">Prendas</a>
          </div>
        </div>
      </div>
      <div class="logos">
        <a href="/carrito" class="material-symbols-outlined">shopping_cart</a>
        <a href="/usuario" class="material-symbols-outlined">person</a>
        <a href="/reclamo" class="material-symbols-outlined">sentiment_extremely_dissatisfied</a>
        <a href="/local" class="material-symbols-outlined">store</a>
      </div>
    </div>
  </nav>
  <h1>Reclamos</h1>
  <table>
    <thead>
      <tr>
        <th>ID</th>
        <th>ID Usuario</th>
        <th>Tipo</th>
        <th>Descripci贸n</th>
        <th>Fecha Creaci贸n</th>
        <th>Fecha Resoluci贸n</th>
        <th>Estado</th>
        <th>Acciones</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let reclamo of reclamos">
        <td>{{ reclamo.id }}</td>
        <td>{{ reclamo.idUsuario }}</td>
        <td>{{ reclamo.tipo }}</td>
        <td>{{ reclamo.descripcion }}</td>
        <td>{{ reclamo.fecha_creacion | date:'short' }}</td>
        <td>
          <span *ngIf="reclamo.fecha_resolucion">{{ reclamo.fecha_resolucion | date:'short' }}</span>
          <input *ngIf="!reclamo.fecha_resolucion" type="datetime-local" [(ngModel)]="reclamo.fecha_resolucion" />
        </td>
        <td>
          <select [(ngModel)]="reclamo.estado">
            <option value="PENDIENTE">PENDIENTE</option>
            <option value="EN_PROCESO">EN_PROCESO</option>
            <option value="RESUELTO">RESUELTO</option>
            <option value="CERRADO">CERRADO</option>
          </select>
        </td>
        <td>
          <button (click)="modificarReclamo(reclamo)">Modificar</button>
          <button (click)="eliminarReclamo(reclamo.id)">Eliminar</button>
        </td>
      </tr>
    </tbody>
  </table>
</div>